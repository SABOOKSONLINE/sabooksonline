<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="The Gateway To South African Literature">
    <meta name="author" content="SA Books Online">
    <title>Library Books</title> 

    <!-- Favicons-->
    <link rel="shortcut icon" href="img/favicon.png" type="image/x-icon">
    <link rel="apple-touch-icon" type="image/x-icon" href="img/favicon.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="72x72" href="img/favicon.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="114x114" href="img/favicon.png">
    <link rel="apple-touch-icon" type="image/x-icon" sizes="144x144" href="img/favicon.png">

    <!-- GOOGLE WEB FONT -->
    <link rel="dns-prefetch" href="https://fonts.gstatic.com/">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="anonymous">
    <link rel="preload" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&amp;display=swap" as="fetch" crossorigin="anonymous">
    <script type="text/javascript">
    !function(e,n,t){"use strict";var o="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&amp;display=swap",r="__3perf_googleFonts_c2536";function c(e){(n.head||n.body).appendChild(e)}function a(){var e=n.createElement("link");e.href=o,e.rel="stylesheet",c(e)}function f(e){if(!n.getElementById(r)){var t=n.createElement("style");t.id=r,c(t)}n.getElementById(r).innerHTML=e}e.FontFace&&e.FontFace.prototype.hasOwnProperty("display")?(t[r]&&f(t[r]),fetch(o).then(function(e){return e.text()}).then(function(e){return e.replace(/@font-face {/g,"@font-face{font-display:swap;")}).then(function(e){return t[r]=e}).then(f).catch(a)):a()}(window,document,localStorage);
    </script>

	<!-- Add these links in your HTML file -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">


    <!-- BASE CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

    <!-- SPECIFIC CSS -->
    <link href="css/contacts.css" rel="stylesheet">

    <!-- SPECIFIC CSS -->
    <link href="css/listing.css" rel="stylesheet">

    <!-- YOUR CUSTOM CSS -->
    <link href="css/custom.css" rel="stylesheet">
<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-V7MRDHEHSZ"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'G-V7MRDHEHSZ');
	</script>

<style>
   

   .book-div img {
       width: 100%;
       border-radius: 10px;  
   }

   .book-div  {
       padding: 1% !important;
   }

   @media screen and (min-width: 200px) and (max-width: 500px)  {
        img .fluid .lazy {
       width: 200px !important;     
        }        

        .book-div img{
       width: 200px !important;
       height: 160px !important;
       border-radius: 10px !important;
        }

   }

   .scroll-container {
    width: 100%; /* Adjust this to your desired fixed width */
    overflow-x: hidden !important; /* Hide the horizontal scrollbar */
    scrollbar-width: none !important; /* Firefox */
        -ms-overflow-style: none !important; /* IE and Edge */
        overflow: hidden; /* Hide the scroll bars */
        border: 0px solid #ccc; /* Optional: Add border for visibility */
    }          

   
  
    .book-row::-webkit-scrollbar {
        width: 0 !important; /* Hide scrollbar for Chrome, Safari, and Opera */
    }

   </style>


<style>
    .scroll-container {
        margin-bottom: 20px; /* Adjust as needed */
    }

    .category-row {
        margin-bottom: 20px; /* Adjust as needed */
    }

    .book-row {
        display: flex;
        overflow-x: auto;
        flex-wrap: nowrap;
    }

    .book-div {
        margin-right: 10px; /* Adjust as needed */
    }

    .book-row {
    display: flex; /* Use flex display for horizontal scrolling */
    overflow-x: auto; /* Enable horizontal overflow scrolling */
    scroll-snap-type: x mandatory; /* Optional: Use scroll snapping for better user experience */
}


.scroll-left {
	margin-left: 90%;
	transform: translateY(-100%);
	border-radius: 50% !important;
	width: 40px;
	height: 40px;
	border: none !important;
}     

.scroll-right {
	transform: translateY(-100%);
	border-radius: 50% !important;
	width: 40px;
	height: 40px;
	border: none !important;
}   

@media screen and (min-width: 300px) and (max-width: 500px)  {
	.scroll-left {
	margin-left: 80%;
	transform: translateY(-100%);
	border-radius: 50% !important;
	width: 30px;
	height: 30px;
	border: none !important;
}     

.scroll-right {
	transform: translateY(-100%);
	border-radius: 50% !important;
	width: 30px;
	height: 30px;
	border: none !important;
}   
           
   }
	
	
	  @media only screen and (max-width: 767px) {
            .book-div img {
				width: 120px !important;
				height: 170px !important;    
				border-radius: 10px !important;
			}

            .m-book-title {
                font-size: 10px !important;  
            }

            .head-t {  
                font-size: 10px !important;   
                font-weight: bold !important;                
            }  
        }
  

</style>

</head>

<body>
				
	<div style="background: #f3f3f3 !important;"><?php include 'includes/header-internal.php';?></div>

	<main class="breaker mobile-library">
		<div class="container margin_30_20">			
			<div class="row">
				<aside class="col-lg-3" id="sidebar_fixed">
				<div class="col-12 bg_gray mb-3">
					<img src="img/banners/side.jpg" width="100%" style="height: 70px;border-radius:5px;">
				</div>
				<!-- /Map -->
				<!-- /Map -->
					<div class="type_delivery">
						<ul class="clearfix">
						    <li>
						        <label class="container_check">Publishers
						            <input type="checkbox" id="type1" name="filter_creator" value="Publisher">
						            <span class="checkmark"></span>
						        </label>
						    </li>
							<li>
						        <label class="container_check">Authors
						            <input type="checkbox" id="type2" name="filter_creator" value="Author">
						            <span class="checkmark"></span>
						        </label>
						    </li>
						</ul>
					</div>
					<!-- /type_delivery -->
				
					<a href="#0" class="open_filters btn_filters"><i class="icon_adjust-vert"></i><span>Filters</span></a>
				
					<div class="filter_col">
						<div class="inner_bt clearfix">Filters<a href="#" class="open_filters"><i class="icon_close"></i></a></div>
						<div class="filter_type d-none">
							<h4><a href="#filter_1" data-bs-toggle="collapse" class="opened">Sort</a></h4>
							<div class="collapse show" id="filter_1">
								<ul>
								    <li>
								        <label class="container_radio">Most Viewed
								            <input type="radio" name="filter_sort" value="Most-Viewed">
								            <span class="checkmark"></span>
								        </label>
								    </li>
								    <li>
								        <label class="container_radio">Recomended
								            <input type="radio" name="filter_sort" checked="checked" value="Reccomended">
								            <span class="checkmark"></span>
								        </label>
								    </li>
								    <li>
								        <label class="container_radio">Top Rated
								            <input type="radio" name="filter_sort" value="Top-Rated">
								            <span class="checkmark"></span>
								        </label>
								    </li>
								    <li>
								        <label class="container_radio">Editors Choice
								            <input type="radio" name="filter_sort" value="Editors-Choice">
								            <span class="checkmark"></span>
								        </label>
								    </li>

								     
								</ul>
							</div>
						</div>
						<!-- /filter_type -->
						<div class="filter_type">
							<h4><a href="#filter_2" data-bs-toggle="collapse" class="closed">Categories</a></h4>
							<div class="collapse" id="filter_2">
								<ul>

								<?php
                                                //DATABASE CONNECTIONS SCRIPT
                                                include 'includes/database_connections/sabooks.php';
                                                $sql = "SELECT * FROM category;";
                                                $result = mysqli_query($conn, $sql);
                                                    if(mysqli_num_rows($result) == false){
                                                    }else{
                                                    while($row = mysqli_fetch_assoc($result)) {

														//$username = ucwords(substr($row['PUBLISHER'], '0', '20'));

														$contentid = $row['CATEGORY'];
														$category_value = str_replace(' ','-', $row['CATEGORY']);
														$category_value = str_replace('&','and', $category_value);
														$category_value = str_replace(',','_', $category_value);

														$rows_query = mysqli_query($conn, "SELECT COUNT(*) as number_rows FROM posts WHERE CATEGORY = '$contentid' AND STATUS = 'active' ORDER BY number_rows DESC;");$rows = 																			mysqli_fetch_assoc($rows_query); 

                                                        echo '<li class="'.$rows["number_rows"].'">
														<label class="container_check">'.$row['CATEGORY'].'';

														$rows_query = mysqli_query($conn, "SELECT COUNT(*) as number_rows FROM posts WHERE CATEGORY = '$contentid' AND STATUS = 'active' ORDER BY number_rows DESC;");$rows = 																			mysqli_fetch_assoc($rows_query); 
														echo '<small class="numb">'.$rows["number_rows"].'</small>';

															echo '<input type="checkbox" id="service'.$row['ID'].'" name="category[]" value="'.$category_value.'">
															<span class="checkmark"></span>
														</label>
													</li>';
                                                    }
                                                }
                                            ?>
								    
								</ul>
							</div>
						</div>
						<!-- /filter_type -->
						<div class="filter_type">
							<h4><a href="#filter_6" data-bs-toggle="collapse" class="closed">Languages</a></h4>
							<div class="collapse" id="filter_6">
								<ul>
									<li>
								        <label class="container_check">English
								            <input type="checkbox" id="language1" name="filter_sort" value="English">
								            <span class="checkmark"></span>
								        </label>
								    </li>

								
									

									<li>
								        <label class="container_check">Northern Sotho
								            <input type="checkbox" id="language5" name="filter_sort" value="Northern Sotho">
								            <span class="checkmark"></span>
								        </label>
								    </li>

									<li>
								        <label class="container_check">Ndebele
								            <input type="checkbox" id="language9" name="filter_sort" value="Ndebele">
								            <span class="checkmark"></span>
								        </label>
								    </li>

									<li>
								        <label class="container_check">Southern Sotho
								            <input type="checkbox" id="language4" name="filter_sort" value="Southern Sotho">
								            <span class="checkmark"></span>
								        </label>
								    </li>

									<li>
								        <label class="container_check">Swati
								            <input type="checkbox" id="language6" name="filter_sort" value="Swati">
								            <span class="checkmark"></span>
								        </label>
								    </li>

									

									<li>
								        <label class="container_check">Tsonga
								            <input type="checkbox" id="language8" name="filter_sort" value="Tsonga">
								            <span class="checkmark"></span>
								        </label>
								    </li>
										

									<li>
								        <label class="container_check">Venda
								            <input type="checkbox" id="language3" name="filter_sort" value="Venda">
								            <span class="checkmark"></span>
								        </label>
								    </li>


									

									<li>
								        <label class="container_check">Xhosa
								            <input type="checkbox" id="language7" name="filter_sort" value="Xhosa">
								            <span class="checkmark"></span>
								        </label>
								    </li>

									<li>
								        <label class="container_check">Zulu
								            <input type="checkbox" id="language2" name="filter_sort" value="Zulu">
								            <span class="checkmark"></span>
								        </label>
								    </li>

								</ul>
							</div>
						</div>
						<!-- /filter_type -->
                        <div class="filter_type">
                            <h4><a href="#filter_3" data-bs-toggle="collapse" class="closed">By Price</a></h4>
                            <div class="collaps" id="filter_3">
                                <div class="distance">Price Range:</div>
                                <div class="add_bottom_25">
                                    <select id="price-range" class="form-control">
                                        <option value="0-1000000000">Any Price</option>
                                        <option value="0-100">0 - 100</option>
                                        <option value="100-250">100 - 250</option>
                                        <option value="250-500">250 - 500</option>
                                        <option value="500-1000000000">500 +</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <!--filter_type -->

 

						<hr>


						<div class="form-group col-lg-12 d-none">
								<div class="search_bar_list" style="border: solid 2px #f3f3f3;border: radius 5px;">
							<input type="text" class="form-control" placeholder="Books, Authors or Publisher" id="search-inpu" name="filter_keywords" value="<?php if(isset($_GET['k'])){
							echo $_GET['k'];
							}?>">
							<button type="submit" class="submit"><i class="icon_search"></i></button>
						</div>
							</div>
						
						<!-- /filter_type -->
						<p><a href="register/account" class="btn_1 full-width">Publish Your Book</a></p>
					</div>
				</aside>

				<style>
					.cat .owl-item .active {
						width: 400px !important;
					}
				</style>

				<div class="col-lg-9 cat">
					<div class="row">
						<div class="col-12">

							<?php if(isset($_GET['k'])){
							//echo '<h2 class="title_small">Results for <b>'.$_GET['k'].'</b> :</h2>';
							
							}else {
								echo '<h2 class="title_small">Search Based on Title, Publisher or Author</h2><hr>';
							} ?>


							
							<div class="owl-carousel owl-theme categories_carousel_in listing mt-1 d-none">
							
											<?php
                                                //DATABASE CONNECTIONS SCRIPT
                                                include 'includes/database_connections/sabooks.php';
                                                $sql = "SELECT * FROM category ORDER BY category;";
                                                $result = mysqli_query($conn, $sql);
                                                    if(mysqli_num_rows($result) == false){
                                                    }else{
                                                    while($row = mysqli_fetch_assoc($result)) {

														$contentid = $row['CATEGORY'];
														$category_value = str_replace(' ','-', $row['CATEGORY']);
														$category_value = str_replace('&','and', $category_value);
														$category_value = str_replace(',','_', $category_value);

                                                        $contentid = $row['CATEGORY'];
                                                        echo '<a href="#" class="badge text-dark p-3 m-0 w-100 cat-switch ';
                                                        $rows_query = mysqli_query($conn, "SELECT COUNT(*) as number_rows FROM posts WHERE CATEGORY = '$contentid' AND STATUS = 'active' ORDER BY number_rows DESC;");$rows = 																			mysqli_fetch_assoc($rows_query); 
														echo $rows["number_rows"];
                                                        echo '" style="background: #f3f3f3;" data-src="'.$category_value.'" data-bs-toggle="tooltip" data-bs-placement="top" title="'.$rows["number_rows"].'  Book(s) Listed">'.$row['CATEGORY'].'</a>';
                                                    }
                                                }
                                            ?>
							</div>

							<div class="form-group col-lg-12">
								<div class="search_bar_list" style="border: solid 2px #f3f3f3;border: radius 5px;">
								<input type="text" class="form-control" placeholder="Books, Authors or Publisher" id="search-input" name="filter_keywords" value="<?php if(isset($_GET['k'])){
								echo $_GET['k'];
								}?>">
								<button type="submit" class="submit"><i class="icon_search"></i></button>
							</div>
						</div>
					</div>
					
 
					<!--<div class="promo">
						<h3>Free Delivery for your first 14 days!</h3>
						<p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip.</p>
						<i class="icon-food_icon_delivery"></i>
					</div> promo -->
					
					<hr>
					
                    <div class="row" id="results-container">
                        <!-- Results will be displayed here -->
  
                    </div>


                    <div class="pagination_fg d-nons" id="pagination">
                        <!-- Pagination links will be generated here -->
                    </div>
				</div>
				<!-- /col -->
			</div>		
		</div>
		<!-- /container -->



	</main>
	<!-- /main -->

	<?php include 'includes/footer.php';?>

	
	
	<!-- COMMON SCRIPTS -->
    <script src="js/common_scripts.min.js"></script>
	<script src="js/custom.js"></script>
    <script src="js/common_func.js"></script>
    <script src="assets/validate.js"></script>

    <!-- SPECIFIC SCRIPTS -->
    <script src="js/sticky_sidebar.min.js"></script>
    <script src="js/specific_listing.js"></script>
    <script src="js/pagination.js"></script>

	<!-- SPECIFIC SCRIPTS -->
<script src="js/vegas.min.js"></script>
<script src="js/specific_listing.js"></script>   

<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    

	<script>
    $(document).ready(function() {
    // Function to update the results based on selected options
    function updateResults() {
        var selectedServices = [];
        var selectedProvinces = [];
        var selectedLanguages = [];
        var selectedPriceRange = $('#price-range').val();
        var searchTerm = $('#search-input').val(); // Get the search term

        // Get selected service keywords
        $("input[id^='service']:checked").each(function() {
            selectedServices.push($(this).val());
        });

        // Get selected provinces
        $("input[id^='type']:checked").each(function() {
            selectedProvinces.push($(this).val());
        });

        // Get selected languages
        $("input[id^='language']:checked").each(function() {
            selectedLanguages.push($(this).val());
        });

        // AJAX request to fetch and display filtered results
        $.ajax({
            type: "GET",
            url: "fetch_library_update.php", // Replace with the URL of your PHP script
            data: {
                search: searchTerm, // Add search term
                service: selectedServices,
                type: selectedProvinces,
                language: selectedLanguages,
                priceRange: selectedPriceRange
            },
            success: function(data) {
                // Update the results container with the retrieved data
                $("#results-container").html(data);
            }
        });
    }

    // Bind the updateResults function to change events on the select element and checkboxes
    $('#price-range, input[type="checkbox"], #search-input').change(function() {
        updateResults();
    });

    // Initial update when the page loads
    updateResults();
});

</script>

<script>
    $(document).ready(function () {
        $(".test-button").on("click", function () {
            alert("Button clicked!");
        });
    });
</script>  

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>



</body>


</html>  